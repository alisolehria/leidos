{% extends 'profile/base.html' %}
{% load staticfiles %}
{% load countries %}
{% block content %}


          <div class="col-md-10">
<div class="container container-rounded">
        <table class="table table-responsive">
    <tbody>
     <tr>
        <td class="profile">Project ID: {{ info.projectID }}</td>
         <td></td>
      </tr>
      <tr>
        <td class="profile">Project Name: {{ info.projectName }}</td>
          <td class="profile"></td>
      </tr>
      <tr>
          <td class="profile"><a class="profileLink" href="{% url 'projectManager:staffprofile' info.projectManager.staffID %}">Project Manager: {{ info.projectManager.user.first_name }} {{ info.projectManager.user.last_name }}</a></td>
        <td class="profile">Maximum Staff: {{ info.numberOfStaff }}</td>
      </tr>
      <tr>
          <td class="profile">Start Date: {{ info.startDate}}</td>
       <td class="profile">End Date: {{ info.endDate }}</td>
      </tr>
     <tr>
        <td class="profile">Country: {{ info.location.country }}</td>
         <td class="profile">City: {{ info.location.city }}</td>
      </tr>
     <tr>
        <td colspan="2" class="profile">Description: {{ info.description}}</td>

      </tr>
    <tr>
         <td class="profile">Status: {{ info.status }}</td>
        <td>    </td>
    </tr>


    </tbody>
  </table>
        </div>
<br>
          <div class="pull-right">

          {% if user not in info.staffID.all and info.numberOfStaff > info.staffID.count and user != info.projectManager%}

            <form action="{% url 'projectManager:projectprofile' info.projectID %}" method="post">
                {% csrf_token %}
                <input type="number" name="projectNum" value="{{ info.projectID }}" hidden />
             <button class="btn btn-success btn-md" name="staffNum" value="{{ user.staffID }}">
          <span class="glyphicon glyphicon-plus-sign"></span> Apply
        </button>
</form>

          {% endif %}
  <form  class = "form-inline" action="{% url 'projectManager:projectprofile' info.projectID %}" method="post">
  {% csrf_token %}
                        <div class="form-group">
                            {% if user in info.staffID.all %}
        <a href="{% url 'projectManager:comments' board %}" class="btn btn-primary btn-sm">
          <span class="glyphicon glyphicon-comment"></span><h7> Message Board</h7>
        </a>

          {% endif %}
{% if info.status == "On Going" and info.projectManager == user %}
     <button class="btn btn-success btn-md" value="{{ info.projectID }}" name="complete"> <span class="glyphicon glyphicon-thumbs-up"></span> Complete</button>
                            {% endif %}
                        </div>
                    </form>
          </div>
          <br>
    <h3>Staff on this Project</h3>
           <div class="col-sm-offset-5">
    <ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#current">Current</a></li>
  <li><a data-toggle="tab" href="#past">Past</a></li>
</ul>
    </div>
    <div class="tab-content">
        <div id="current" class="tab-pane fade in active">
        <br>
     <div class="input-group pull-right">
           <span class="input-group-addon">
        <i class="glyphicon glyphicon-search"></i>
    </span>
    <input type="text" class="search form-control" placeholder="Search Staff">
</div>
<span class="counter pull-right"></span>
  <table class="table table-responsive table-bordered table-scrollx listTable results">
        <thead>
          <tr>

             <th>Staff ID</th>
            <th>First Name</th>
            <th>Last Name</th>

              <th>Designation</th>
              <th>Skill Level</th>
              <th>Start Date</th>
              <th>End Date</th>


          </tr>
        <tr class="warning no-result">
      <td colspan="7"><i class="fa fa-warning"></i> No result</td>
    </tr>
        </thead>
        <tbody>
        {% for staff in current %}
            <tr>
                <td><a href="{% url 'projectManager:staffprofile' staff.profile_ID.staffID %}">{{ staff.profile_ID.staffID }}</a></td>
            <td>{{staff.profile_ID.user.first_name }}</td>
            <td>{{staff.profile_ID.user.last_name }}</td>

            <td>{{ staff.profile_ID.designation }}</td>
            <td>{{ staff.profile_ID.skillLevel }}</td>
              <td>
                {{ staff.startDate }}


            </td>
             <td>
                 {{ staff.endDate }}
             </td>
{% if staff.profile_ID.staffID != user.staffID and info.status != "Completed" and info.status != "Discontinued" and info.projectManager == user %}
 <form action="{% url 'projectManager:projectprofile' info.projectID %}" method="post">
    {% csrf_token %}
     <td><button class="btn btn-danger btn-sm" value="{{ staff.profile_ID.staffID }}" name="remove"> <span class="glyphicon glyphicon-remove-sign"></span> Remove</button></td>



                   </form>
{% endif %}
            </tr>


        {% endfor %}

        </tbody>
      </table>
         </div>

     <div id="past" class="tab-pane fade in">
       <br>
     <div class="input-group pull-right">
           <span class="input-group-addon">
        <i class="glyphicon glyphicon-search"></i>
    </span>
    <input type="text" class="search form-control" placeholder="Search Staff">
</div>
<span class="counter pull-right"></span>
  <table class="table table-responsive table-bordered listTable table-scrollx results">
        <thead>
          <tr>

            <th>Staff ID</th>
            <th>First Name</th>
            <th>Last Name</th>

              <th>Designation</th>
              <th>Skill Level</th>


          </tr>
        <tr class="warning no-result">
      <td colspan="7"><i class="fa fa-warning"></i> No result</td>
    </tr>
        </thead>
        <tbody>
        {% for staff in past %}

            <tr>
                <td><a href="{% url 'adminUser:staffprofile' staff.profile_ID.staffID %}">{{ staff.profile_ID.staffID }}</a></td>
            <td>{{ staff.profile_ID.user.first_name }}</td>
            <td>{{ staff.profile_ID.user.last_name }}</td>

            <td>{{ staff.profile_ID.designation }}</td>
            <td>{{ staff.profile_ID.skillLevel }}</td>



            </tr>


        {% endfor %}

        </tbody>
      </table>
        </div>
    </div>

            <br>
  <div class="pull-right">
                {% if info.projectManager == user %}
                {% if count < info.numberOfStaff %}
                        {% if info.status == "On Going" or info.status == "Approved"%}
 <a href="{% url 'projectManager:matchmakingProject' info.projectID %}" class="btn btn-primary btn-md">
          <span class="glyphicon glyphicon-star"></span> Match-Making
        </a>
                    <a href="{% url 'projectManager:addstaff' info.projectID %}"><input class="btn btn-success btn-md" type="submit" value="Add Staff" id="saveskill" name="continue"/></a>
          {% endif %}

  {% endif %}
  {% endif %}
          </div>

<br>
    <h3>Skills Required for this Project</h3>
         <div class="input-group pull-right">
           <span class="input-group-addon">
        <i class="glyphicon glyphicon-search"></i>
    </span>
   <input type="text" id="skillsearch" onkeyup="searchSkills()" class="form-control" placeholder="Search Skill">
</div>
<span class="counter pull-right"></span>
              <table id="skilltable" class="table table-responsive table-bordered listTable results">
              <thead>
              <tr>
                  <th class="success">Skill Name</th>
                  <th class="success">Hours Required</th>
                   <th class="success">Start Date</th>
                  <th class="success">End Date</th>
              </tr>
                <tr class="warning no-results">
      <td colspan="2" class="warning"><i class="fa fa-warning"></i> No result</td>
    </tr>
              </thead>
        <tbody>

            {% for skills,hrs in skillwithhrs.items  %}

            <tr>

            <td class="danger">{{ skills}}</td>

            <td class = "danger">{{ hrs }}</td>
                 <td class = "danger">{{ hrs.startDate }}</td>
            <td class = "danger">{{ hrs.endDate }}</td>

  {% endfor %}

        </tbody>
      </table>

        <br>
          <div class="pull-right">
                {% if info.projectManager == user %}
                     {% if info.status == "On Going" or info.status == "Approved"%}
                    <a href="{% url 'projectManager:addskill' info.projectID %}"><input class="btn btn-success btn-md" type="submit" value="Add Skill" id="saveskill" name="continue"/></a>
          {% endif %}
          {% endif %}
          </div>

</div>
      <br>
      <br>
          {% endblock %}